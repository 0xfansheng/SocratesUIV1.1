'use client'

import { useState, useEffect, useMemo, useCallback } from 'react'
import { useRouter } from 'next/navigation'
import Navbar from '../components/Navbar'
import PredictionCard from '../components/PredictionCard'
import MarketDetail from '../components/MarketDetail'
import ThreeColumnMarketCard from '../components/ThreeColumnMarketCard'
import { useLanguage } from '../contexts/LanguageContext'
import { mockMarkets } from '../mock/markets'

// ä¸»æ ‡ç­¾é¡µå°†åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨å›½é™…åŒ–

// Three Column Market View Component
function ThreeColumnMarketView({ markets, searchQuery, selectedCategory, sortBy, onCardClick }: {
  markets: any[]
  searchQuery: string
  selectedCategory: string
  sortBy: string
  onCardClick: (marketId: string) => void
}) {
  const { t } = useLanguage()
  const [displayedMarkets, setDisplayedMarkets] = useState<any[][]>([[], [], []])
  const [loading, setLoading] = useState(false)
  const [hasMore, setHasMore] = useState(true)
  const [page, setPage] = useState(1)
  const itemsPerPage = 10

  // Filter and sort markets
  const filteredMarkets = useMemo(() => {
    let filtered = markets

    // Apply search filter
    if (searchQuery) {
      filtered = filtered.filter(market => 
        market.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
        market.category.toLowerCase().includes(searchQuery.toLowerCase())
      )
    }

    // Apply category filter
    if (selectedCategory !== 'all') {
      filtered = filtered.filter(market => market.category === selectedCategory)
    }

    // Apply sorting
    switch (sortBy) {
      case 'volume':
        filtered.sort((a, b) => (b.volume || 0) - (a.volume || 0))
        break
      case 'ending':
        filtered.sort((a, b) => new Date(a.endDate).getTime() - new Date(b.endDate).getTime())
        break
      case 'popular':
        filtered.sort((a, b) => (b.participants || 0) - (a.participants || 0))
        break
      default: // newest
        filtered.sort((a, b) => new Date(b.endDate).getTime() - new Date(a.endDate).getTime())
    }

    return filtered
  }, [markets, searchQuery, selectedCategory, sortBy])

  // Initialize markets on first load
  useEffect(() => {
    const initialMarkets = filteredMarkets.slice(0, itemsPerPage * 3)
    const columns: any[][] = [[], [], []]
    
    initialMarkets.forEach((market, index) => {
      columns[index % 3].push(market)
    })
    
    setDisplayedMarkets(columns)
    setPage(1)
    setHasMore(filteredMarkets.length > itemsPerPage * 3)
  }, [filteredMarkets])

  // Load more markets
  const loadMore = useCallback(() => {
    if (loading || !hasMore) return
    
    setLoading(true)
    
    setTimeout(() => {
      const startIndex = page * itemsPerPage * 3
      const endIndex = startIndex + itemsPerPage * 3
      const newMarkets = filteredMarkets.slice(startIndex, endIndex)
      
      if (newMarkets.length === 0) {
        setHasMore(false)
        setLoading(false)
        return
      }
      
      const newColumns: any[][] = [[], [], []]
      newMarkets.forEach((market, index) => {
        newColumns[index % 3].push(market)
      })
      
      setDisplayedMarkets(prev => [
        [...prev[0], ...newColumns[0]],
        [...prev[1], ...newColumns[1]],
        [...prev[2], ...newColumns[2]]
      ])
      
      setPage(prev => prev + 1)
      setHasMore(endIndex < filteredMarkets.length)
      setLoading(false)
    }, 500)
  }, [loading, hasMore, page, filteredMarkets])

  // Intersection Observer for infinite scroll
  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        if (entries[0].isIntersecting && hasMore && !loading) {
          loadMore()
        }
      },
      { threshold: 0.1 }
    )

    const sentinel = document.getElementById('scroll-sentinel')
    if (sentinel) {
      observer.observe(sentinel)
    }

    return () => {
      if (sentinel) {
        observer.unobserve(sentinel)
      }
    }
  }, [hasMore, loading, loadMore])

  return (
    <div className="min-h-screen bg-black text-white font-['Space_Grotesk']">
      <div className="max-w-7xl mx-auto px-4 py-8">
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {displayedMarkets.map((column, columnIndex) => (
            <div key={columnIndex} className="space-y-6">
              {column.map((market, index) => (
                <div 
                  key={market.id} 
                  className="animate-fade-in"
                  style={{ animationDelay: `${(columnIndex * 100) + (index * 50)}ms` }}
                >
                  <ThreeColumnMarketCard {...market} onCardClick={onCardClick} />
                </div>
              ))}
            </div>
          ))}
        </div>
        
        {/* Loading indicator */}
        {loading && (
          <div className="flex justify-center items-center py-8">
            <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-[#00FFAE]"></div>
            <span className="ml-3 text-gray-400">{t('button.loadMore')}</span>
          </div>
        )}
        
        {/* Load more button */}
        {!loading && hasMore && (
          <div className="text-center mt-8">
            <button 
              onClick={loadMore}
              className="bg-[#00FFAE] hover:bg-[#00D4AA] text-black font-bold py-3 px-8 rounded-lg transition-all duration-200 hover:scale-105"
            >
              {t('button.loadMore')}
            </button>
          </div>
        )}
        
        {/* No more data */}
        {!hasMore && displayedMarkets[0].length > 0 && (
          <div className="text-center py-8 text-gray-400">
            {t('search.noResults')}
          </div>
        )}
        
        {/* Empty state */}
        {!loading && displayedMarkets[0].length === 0 && (
          <div className="text-center py-12">
            <div className="text-gray-400 text-lg mb-4">{t('search.noResults')}</div>
            <p className="text-gray-500">{t('search.clearFilters')}</p>
          </div>
        )}
        
        {/* Scroll sentinel for infinite scroll */}
        <div id="scroll-sentinel" className="h-4"></div>
      </div>
    </div>
  )
}

const timeFilters = [
  { key: '1m', label: '1åˆ†é’Ÿ', active: false },
  { key: '5m', label: '5åˆ†é’Ÿ', active: false },
  { key: '1h', label: '1å°æ—¶', active: true },
  { key: '6h', label: '6å°æ—¶', active: false },
  { key: '24h', label: '24å°æ—¶', active: false }
]

const smartWallets = [
  {
    id: '1',
    address: 'gmgM...dra',
    avatar: 'ğŸ”¥',
    pnl1d: '+12.4%',
    pnl7d: '+108.3%',
    pnl30d: '+10.3%',
    winRate7d: '90%',
    trades7d: 148,
    followers: 473,
    balance: '$18.8K',
    status: 'online'
  },
  {
    id: '2', 
    address: 'ret3...7u3',
    avatar: 'ğŸ’',
    pnl1d: '+308%',
    pnl7d: '+145.5%',
    pnl30d: '+145.5%',
    winRate7d: '100%',
    trades7d: 106,
    followers: 277,
    balance: '$9.839.2',
    status: 'online'
  },
  {
    id: '3',
    address: 'Cupsey',
    avatar: 'ğŸ¯',
    pnl1d: '+18.8%',
    pnl7d: '+11.8%',
    pnl30d: '+17%',
    winRate7d: '63.6%',
    trades7d: 10237,
    followers: 24372,
    balance: '$1,446.3',
    status: 'online'
  },
  {
    id: '4',
    address: 'Alpha...9x2',
    avatar: 'ğŸš€',
    pnl1d: '+45.2%',
    pnl7d: '+234.7%',
    pnl30d: '+189.4%',
    winRate7d: '85%',
    trades7d: 89,
    followers: 1247,
    balance: '$45.2K',
    status: 'online'
  },
  {
    id: '5',
    address: 'Whale...k8m',
    avatar: 'ğŸ‹',
    pnl1d: '+89.1%',
    pnl7d: '+67.3%',
    pnl30d: '+156.8%',
    winRate7d: '78%',
    trades7d: 234,
    followers: 3456,
    balance: '$127.5K',
    status: 'online'
  },
  {
    id: '6',
    address: 'Degen...5f7',
    avatar: 'âš¡',
    pnl1d: '+156.3%',
    pnl7d: '+89.2%',
    pnl30d: '+234.1%',
    winRate7d: '92%',
    trades7d: 67,
    followers: 892,
    balance: '$78.9K',
    status: 'online'
  },
  {
    id: '7',
    address: 'Smart...3a1',
    avatar: 'ğŸ§ ',
    pnl1d: '+23.7%',
    pnl7d: '+178.4%',
    pnl30d: '+267.9%',
    winRate7d: '88%',
    trades7d: 156,
    followers: 2134,
    balance: '$89.3K',
    status: 'online'
  },
  {
    id: '8',
    address: 'Profit...7k9',
    avatar: 'ğŸ’°',
    pnl1d: '+67.8%',
    pnl7d: '+123.6%',
    pnl30d: '+198.2%',
    winRate7d: '81%',
    trades7d: 298,
    followers: 1789,
    balance: '$156.7K',
    status: 'online'
  },
  {
    id: '9',
    address: 'Ninja...2b4',
    avatar: 'ğŸ¥·',
    pnl1d: '+34.5%',
    pnl7d: '+89.7%',
    pnl30d: '+145.3%',
    winRate7d: '76%',
    trades7d: 445,
    followers: 567,
    balance: '$34.8K',
    status: 'offline'
  },
  {
    id: '10',
    address: 'Titan...8x5',
    avatar: 'â­',
    pnl1d: '+78.9%',
    pnl7d: '+156.2%',
    pnl30d: '+289.6%',
    winRate7d: '94%',
    trades7d: 78,
    followers: 4567,
    balance: '$234.5K',
    status: 'online'
  },
  {
    id: '11',
    address: 'Crypto...9m3',
    avatar: 'ğŸ²',
    pnl1d: '+12.3%',
    pnl7d: '+45.8%',
    pnl30d: '+78.4%',
    winRate7d: '69%',
    trades7d: 567,
    followers: 234,
    balance: '$23.4K',
    status: 'offline'
  },
  {
    id: '12',
    address: 'Moon...4r7',
    avatar: 'ğŸŒ™',
    pnl1d: '+234.7%',
    pnl7d: '+345.2%',
    pnl30d: '+567.8%',
    winRate7d: '96%',
    trades7d: 45,
    followers: 6789,
    balance: '$456.7K',
    status: 'online'
  }
]

export default function Home() {
  const { t } = useLanguage()
  const router = useRouter()
  
  // ä½¿ç”¨å›½é™…åŒ–çš„ä¸»æ ‡ç­¾é¡µ
  const mainTabs = [
    { key: 'Markets', label: t('tab.markets'), icon: 'ğŸ“Š' },
    { key: 'Following', label: t('tab.following'), icon: 'ğŸ‘¥' },
    { key: 'Live', label: t('tab.live'), icon: 'ğŸ“º' }
  ]
  
  // å¤„ç†å¸‚åœºå¡ç‰‡ç‚¹å‡»äº‹ä»¶
  const handleCardClick = (marketId: string) => {
    router.push(`/market/${marketId}`)
  }

  // å¤„ç†ç›´æ’­é—´ç‚¹å‡»äº‹ä»¶
  const handleLiveStreamClick = (stream: any) => {
    setSelectedLiveStream(stream)
  }
  
  const [activeTab, setActiveTab] = useState('Markets')
  const [selectedTimeFilter, setSelectedTimeFilter] = useState('1h')
  const [isLoading, setIsLoading] = useState(true)
  const [searchQuery, setSearchQuery] = useState('')
  const [selectedMarketId, setSelectedMarketId] = useState<string | null>(null)
  const [selectedWallet, setSelectedWallet] = useState<string | null>(null)
  const [marketView, setMarketView] = useState<'waterfall' | 'three-column'>('waterfall')
  const [selectedCategory, setSelectedCategory] = useState('all')
  const [sortBy, setSortBy] = useState('newest')
  const [lastRefreshTime, setLastRefreshTime] = useState(Date.now())
  const [scrollPosition, setScrollPosition] = useState(0)
  const [launchingRefreshTime, setLaunchingRefreshTime] = useState(Date.now())
  const [launchedRefreshTime, setLaunchedRefreshTime] = useState(Date.now())
  const [waterfallItems, setWaterfallItems] = useState<string[]>([])
  const [isWaterfallActive, setIsWaterfallActive] = useState(false)
  const [launchingWaterfallItems, setLaunchingWaterfallItems] = useState<string[]>([])
  const [isLaunchingWaterfallActive, setIsLaunchingWaterfallActive] = useState(false)
  
  // æ–°å¢çŠ¶æ€ï¼šä¸‰åˆ—æ•°æ®ç®¡ç†
  const [newCreatedMarkets, setNewCreatedMarkets] = useState<any[]>([])
  const [aboutToLaunchMarkets, setAboutToLaunchMarkets] = useState<any[]>([])
  const [launchedMarkets, setLaunchedMarkets] = useState<any[]>([])
  
  // ç›´æ’­åˆ·æ–°çŠ¶æ€
  const [liveRefreshKey, setLiveRefreshKey] = useState(0)
  const [liveStreams, setLiveStreams] = useState([
    { id: 1, title: 'CryptoKingç›´æ’­é—´', viewers: 2847, avatar: 'ğŸ‘‘', topic: 'BTCçªç ´åˆ†æ' },
    { id: 2, title: 'MarketGuruå®æ—¶', viewers: 1923, avatar: 'ğŸ“ˆ', topic: 'å®æ—¶äº¤æ˜“ç­–ç•¥' },
    { id: 3, title: 'PredictionMaster', viewers: 3456, avatar: 'ğŸ”®', topic: 'é¢„æµ‹å¸‚åœºè§£æ' },
    { id: 4, title: 'TechAnalyst', viewers: 1567, avatar: 'ğŸ“Š', topic: 'æŠ€æœ¯æŒ‡æ ‡åˆ†æ' },
    { id: 5, title: 'WhaleWatcher', viewers: 2134, avatar: 'ğŸ‹', topic: 'å·¨é²¸åŠ¨å‘ç›‘æ§' }
  ])
  const [featuredStreams, setFeaturedStreams] = useState([
    { id: 1, title: 'NewsTraderç›´æ’­é—´', topic: 'é‡å¤§æ–°é—»å¯¹å¸‚åœºçš„å½±å“åˆ†æ', viewers: 987, avatar: 'ğŸ“°' },
    { id: 2, title: 'DeFiExpert', topic: 'DeFiåè®®æ·±åº¦è§£æ', viewers: 1234, avatar: 'ğŸ¦' },
    { id: 3, title: 'NFTGuru', topic: 'NFTå¸‚åœºè¶‹åŠ¿é¢„æµ‹', viewers: 756, avatar: 'ğŸ¨' },
    { id: 4, title: 'MetaTrader', topic: 'å…ƒå®‡å®™æŠ•èµ„æœºä¼š', viewers: 2156, avatar: 'ğŸŒ' }
  ])
  const [selectedLiveStream, setSelectedLiveStream] = useState(null)

  useEffect(() => {
    // Simulate loading
    const timer = setTimeout(() => {
      setIsLoading(false)
    }, 1000)

    return () => clearTimeout(timer)
  }, [])

  // åˆå§‹åŒ–ä¸‰åˆ—æ•°æ® - ä¸€å¼€å§‹å°±æ˜¾ç¤ºå¤§é‡è¯é¢˜
  useEffect(() => {
    // åˆå§‹åŒ–æœ€æ–°åˆ›å»ºè¯é¢˜ï¼ˆå‚ä¸äººæ•°è¾ƒå°‘çš„æ–°è¯é¢˜ï¼‰- æ˜¾ç¤ºæ›´å¤šåˆå§‹æ•°æ®
    const initialNewCreated = []
    for (let i = 0; i < 15; i++) {
      const randomMarket = mockMarkets[Math.floor(Math.random() * mockMarkets.length)]
      initialNewCreated.push({
        ...randomMarket,
        id: randomMarket.id + '_new_' + Date.now() + '_' + i,
        title: `${randomMarket.title} (${Math.floor(Math.random() * 30) + 1}åˆ†é’Ÿå‰åˆ›å»º)`,
        participants: Math.floor(Math.random() * 80) + 5,
        status: 'active'
      })
    }
    setNewCreatedMarkets(initialNewCreated)

    // åˆå§‹åŒ–å³å°†å‘å°„è¯é¢˜ï¼ˆå‚ä¸äººæ•°é€‚ä¸­çš„è¯é¢˜ï¼‰- æ˜¾ç¤ºæ›´å¤šåˆå§‹æ•°æ®
    const initialAboutToLaunch = []
    for (let i = 0; i < 15; i++) {
      const randomMarket = mockMarkets[Math.floor(Math.random() * mockMarkets.length)]
      initialAboutToLaunch.push({
        ...randomMarket,
        id: randomMarket.id + '_launching_' + Date.now() + '_' + i,
        title: `${randomMarket.title} (çƒ­åº¦ä¸Šå‡ä¸­)`,
        participants: Math.floor(Math.random() * 800) + 100,
        status: 'active'
      })
    }
    setAboutToLaunchMarkets(initialAboutToLaunch)

    // åˆå§‹åŒ–å·²å‘å°„è¯é¢˜ï¼ˆå‚ä¸äººæ•°è¾ƒå¤šçš„æˆç†Ÿè¯é¢˜ï¼‰- æ˜¾ç¤ºæ›´å¤šåˆå§‹æ•°æ®
    const initialLaunched = []
    for (let i = 0; i < 15; i++) {
      const randomMarket = mockMarkets[Math.floor(Math.random() * mockMarkets.length)]
      initialLaunched.push({
        ...randomMarket,
        id: randomMarket.id + '_launched_' + Date.now() + '_' + i,
        title: `${randomMarket.title} (å·²æˆåŠŸå‘å°„)`,
        participants: Math.floor(Math.random() * 2000) + 1000,
        status: 'active'
      })
    }
    setLaunchedMarkets(initialLaunched)
  }, [])

  // ç›´æ’­æ•°æ®åˆ·æ–°ï¼šæ¯15ç§’æ›´æ–°ç›´æ’­æµæ•°æ®
  useEffect(() => {
    const liveInterval = setInterval(() => {
      // æ›´æ–°ç›´æ’­æµè§‚çœ‹äººæ•°å’Œè¯é¢˜
      setLiveStreams(prev => prev.map(stream => ({
        ...stream,
        viewers: stream.viewers + Math.floor(Math.random() * 100) - 50, // éšæœºå¢å‡è§‚çœ‹äººæ•°
        topic: stream.topic + (Math.random() > 0.7 ? ' ğŸ”¥' : '') // éšæœºæ·»åŠ ç«çƒ­æ ‡è¯†
      })))
      
      // æ›´æ–°ç²¾é€‰ç›´æ’­æµ
      setFeaturedStreams(prev => prev.map(stream => ({
        ...stream,
        viewers: Math.max(100, stream.viewers + Math.floor(Math.random() * 200) - 100)
      })))
      
      setLiveRefreshKey(prev => prev + 1)
    }, 15000) // æ¯15ç§’åˆ·æ–°ä¸€æ¬¡

    return () => clearInterval(liveInterval)
  }, [])

  // æœ€æ–°åˆ›å»ºè¯é¢˜ï¼šæ¯10ç§’è¿½åŠ ä¸€ä¸ªæ–°å¡ç‰‡åˆ°é¡¶éƒ¨
  useEffect(() => {
    const interval = setInterval(() => {
      const randomMarket = mockMarkets[Math.floor(Math.random() * mockMarkets.length)]
      const newMarket = {
        ...randomMarket,
        id: randomMarket.id + '_new_' + Date.now() + '_refresh',
        title: `${randomMarket.title} (åˆšåˆšåˆ›å»º)`,
        participants: Math.floor(Math.random() * 50) + 1,
        status: 'active'
      }
      
      setNewCreatedMarkets(prev => [newMarket, ...prev].slice(0, 20)) // ä¿æŒæœ€å¤š20ä¸ªï¼Œæ–°çš„åœ¨é¡¶éƒ¨
    }, 10000) // æ¯10ç§’

    return () => clearInterval(interval)
  }, [])

  // å³å°†å‘å°„è¯é¢˜ï¼šæ¯15ç§’è¿½åŠ ä¸€ä¸ªæ–°å¡ç‰‡åˆ°é¡¶éƒ¨
  useEffect(() => {
    const interval = setInterval(() => {
      const randomMarket = mockMarkets[Math.floor(Math.random() * mockMarkets.length)]
      const newMarket = {
        ...randomMarket,
        id: randomMarket.id + '_launching_' + Date.now() + '_refresh',
        title: `${randomMarket.title} (çƒ­åº¦é£™å‡)`,
        participants: Math.floor(Math.random() * 500) + 100,
        status: 'active'
      }
      
      setAboutToLaunchMarkets(prev => [newMarket, ...prev].slice(0, 20)) // ä¿æŒæœ€å¤š20ä¸ªï¼Œæ–°çš„åœ¨é¡¶éƒ¨
    }, 15000) // æ¯15ç§’

    return () => clearInterval(interval)
  }, [])

  useEffect(() => {
    // æŒç»­ç€‘å¸ƒæµåˆ·æ–°é€»è¾‘ - æ¨¡æ‹ŸPolymarketå®˜ç½‘æ•ˆæœ
    // ä¸»è¦åˆ·æ–°é—´éš” - æ¯15ç§’ä¸€æ¬¡å¤§æ‰¹é‡åˆ·æ–°
    const mainInterval = setInterval(() => {
      setLastRefreshTime(Date.now())
      setIsWaterfallActive(true)
      
      // å¤§æ‰¹é‡ç€‘å¸ƒæµï¼šæ˜¾ç¤º12-15ä¸ªæ–°é¡¹ç›®
      const newItems = mockMarkets.slice(0, 15).map(m => m.id)
      setWaterfallItems([])
      
      newItems.forEach((itemId, index) => {
        setTimeout(() => {
          setWaterfallItems(prev => [...prev, itemId])
        }, index * 150) // æ¯150msæ˜¾ç¤ºä¸€ä¸ªæ–°é¡¹ç›®
      })
      
      setTimeout(() => {
        setIsWaterfallActive(false)
        setWaterfallItems([])
      }, 4000)
    }, 15000) // æ¯15ç§’ä¸»è¦åˆ·æ–°

    // å°æ‰¹é‡æŒç»­åˆ·æ–° - æ¯5ç§’æ·»åŠ 2-3ä¸ªæ–°è¯é¢˜
    const continuousInterval = setInterval(() => {
      if (!isWaterfallActive) {
        setIsWaterfallActive(true)
        
        // éšæœºé€‰æ‹©2-3ä¸ªè¯é¢˜è¿›è¡Œå°æ‰¹é‡åˆ·æ–°
        const randomItems = mockMarkets
          .sort(() => Math.random() - 0.5)
          .slice(0, 3)
          .map(m => m.id)
        
        setWaterfallItems([])
        randomItems.forEach((itemId, index) => {
          setTimeout(() => {
            setWaterfallItems(prev => [...prev, itemId])
          }, index * 300)
        })
        
        setTimeout(() => {
          setIsWaterfallActive(false)
          setWaterfallItems([])
        }, 1500)
      }
    }, 5000) // æ¯5ç§’å°æ‰¹é‡åˆ·æ–°

    return () => {
      clearInterval(mainInterval)
      clearInterval(continuousInterval)
    }
  }, [isWaterfallActive])

  useEffect(() => {
    // å³å°†å‘å°„è¯é¢˜çš„æŒç»­ç€‘å¸ƒæµåˆ·æ–°
    // ä¸»è¦åˆ·æ–° - æ¯20ç§’ä¸€æ¬¡
    const launchingMainInterval = setInterval(() => {
      setLaunchingRefreshTime(Date.now())
      setIsLaunchingWaterfallActive(true)
      
      // è·å–å³å°†å‘å°„çš„è¯é¢˜ï¼ˆå‚ä¸äººæ•°é€‚ä¸­çš„æ´»è·ƒè¯é¢˜ï¼‰
      const launchingItems = mockMarkets
        .filter(market => market.status === 'active' || market.status === 'ending_soon')
        .sort(() => Math.random() - 0.5)
        .slice(0, 10)
        .map(m => m.id)
      
      setLaunchingWaterfallItems([])
      
      launchingItems.forEach((itemId, index) => {
        setTimeout(() => {
          setLaunchingWaterfallItems(prev => [...prev, itemId])
        }, index * 200) // æ¯200msæ˜¾ç¤ºä¸€ä¸ªæ–°é¡¹ç›®
      })
      
      setTimeout(() => {
        setIsLaunchingWaterfallActive(false)
        setLaunchingWaterfallItems([])
      }, 3000)
    }, 20000) // æ¯20ç§’ä¸»è¦åˆ·æ–°

    // å°æ‰¹é‡æŒç»­åˆ·æ–° - æ¯7ç§’æ·»åŠ 1-2ä¸ªè¯é¢˜
    const launchingContinuousInterval = setInterval(() => {
      if (!isLaunchingWaterfallActive) {
        setIsLaunchingWaterfallActive(true)
        
        const randomItems = mockMarkets
          .filter(market => market.status === 'active')
          .sort(() => Math.random() - 0.5)
          .slice(0, 2)
          .map(m => m.id)
        
        setLaunchingWaterfallItems([])
        randomItems.forEach((itemId, index) => {
          setTimeout(() => {
            setLaunchingWaterfallItems(prev => [...prev, itemId])
          }, index * 400)
        })
        
        setTimeout(() => {
          setIsLaunchingWaterfallActive(false)
          setLaunchingWaterfallItems([])
        }, 1200)
      }
    }, 7000) // æ¯7ç§’å°æ‰¹é‡åˆ·æ–°

    return () => {
      clearInterval(launchingMainInterval)
      clearInterval(launchingContinuousInterval)
    }
  }, [isLaunchingWaterfallActive])

  useEffect(() => {
    // Auto-refresh every 3 minutes for "å·²å‘å°„" section
    const launchedRefreshInterval = setInterval(() => {
      setLaunchedRefreshTime(Date.now())
    }, 180000) // 180 seconds

    return () => clearInterval(launchedRefreshInterval)
  }, [])

  useEffect(() => {
    // Auto-scroll effect for new markets - smooth continuous scroll
    const scrollInterval = setInterval(() => {
      setScrollPosition(prev => (prev + 1) % 100)
    }, 100) // Smooth scroll every 100ms

    return () => clearInterval(scrollInterval)
  }, [])

  // æŒ‰çŠ¶æ€åˆ†ç»„å¸‚åœºæ•°æ® - GMGNé£æ ¼ä¸‰åˆ—å¸ƒå±€
  const marketGroups = useMemo(() => {
    let filtered = mockMarkets
    
    // Filter by search query
    if (searchQuery) {
      filtered = filtered.filter(market => 
        market.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
        market.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()))
      )
    }
    
    // Filter by time - simulate different data based on time filter
    const timeMultiplier = {
      '1m': 0.1,
      '5m': 0.3, 
      '1h': 1.0,
      '6h': 1.5,
      '24h': 2.0
    }[selectedTimeFilter] || 1.0
    
    // Apply time-based filtering to simulate different market activity
    filtered = filtered.map(market => ({
      ...market,
      participants: Math.floor(market.participants * timeMultiplier),
      volume: `$${(parseFloat(market.volume.replace('$', '').replace('M', '')) * timeMultiplier).toFixed(1)}M`,
      yesPercentage: Math.max(5, Math.min(95, market.yesPercentage + (timeMultiplier - 1) * 10))
    }))
    
    // Add time-based randomization for all sections to simulate real-time updates
    const newTimeOffset = Math.floor(lastRefreshTime / 60000) % 10
    const launchingTimeOffset = Math.floor(launchingRefreshTime / 120000) % 8
    const launchedTimeOffset = Math.floor(launchedRefreshTime / 180000) % 6
    
    // æŒ‰çŠ¶æ€åˆ†ç»„ - å¢åŠ æ›´å¤šè¯é¢˜æ•°é‡
    const newMarkets = filtered.filter(market => market.status === 'active' && market.participants < 100)
      .map((market, index) => ({
        ...market,
        id: market.id + newTimeOffset * 100, // Simulate new IDs
        title: `${market.title} (${new Date().getMinutes()}åˆ†é’Ÿå‰åˆ›å»º)`,
        participants: Math.floor(Math.random() * 50) + 1
      })).slice(0, 20) // Increased from 12 to 20
    
    const launchingMarkets = filtered.filter(market => market.status === 'active' && market.participants >= 100 && market.participants < 1000)
      .map((market, index) => ({
        ...market,
        id: market.id + launchingTimeOffset * 200, // Simulate refreshed data
        participants: market.participants + Math.floor(Math.random() * 100),
        yesPercentage: Math.max(5, Math.min(95, market.yesPercentage + (Math.random() - 0.5) * 10))
      })).slice(0, 25) // Increased from 15 to 25
    
    const launchedMarkets = filtered.filter(market => market.status === 'active' && market.participants >= 1000)
      .map((market, index) => ({
        ...market,
        id: market.id + launchedTimeOffset * 300, // Simulate refreshed data
        participants: market.participants + Math.floor(Math.random() * 500),
        volume: `$${(parseFloat(market.volume.replace('$', '').replace('M', '')) + Math.random() * 2).toFixed(1)}M`
      })).slice(0, 20) // Increased from 10 to 20
    
    return {
      new: newMarkets,
      launching: launchingMarkets,
      launched: launchedMarkets
    }
  }, [searchQuery, selectedTimeFilter, lastRefreshTime, launchingRefreshTime, launchedRefreshTime])

  const LoadingSkeleton = () => (
    <div className="bg-tertiary rounded-2xl p-4 animate-pulse">
      <div className="h-32 bg-secondary rounded-xl mb-4"></div>
      <div className="flex items-center space-x-3 mb-3">
        <div className="w-10 h-10 bg-secondary rounded-full"></div>
        <div className="flex-1">
          <div className="h-4 bg-secondary rounded mb-2"></div>
          <div className="h-3 bg-secondary rounded w-3/4"></div>
        </div>
      </div>
      <div className="h-2 bg-secondary rounded mb-4"></div>
      <div className="grid grid-cols-3 gap-3 mb-4">
        <div className="h-8 bg-secondary rounded"></div>
        <div className="h-8 bg-secondary rounded"></div>
        <div className="h-8 bg-secondary rounded"></div>
      </div>
      <div className="flex space-x-2">
        <div className="flex-1 h-10 bg-secondary rounded-xl"></div>
        <div className="flex-1 h-10 bg-secondary rounded-xl"></div>
      </div>
    </div>
  )

  if (isLoading) {
    return (
      <div className="min-h-screen bg-primary text-primary language-transition">
        <div className="responsive-container py-8">
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {[...Array(6)].map((_, i) => (
              <LoadingSkeleton key={i} />
            ))}
          </div>
        </div>
      </div>
    )
  }

  return (
    <div className="min-h-screen bg-primary text-primary language-transition">
      {/* Top Navigation */}
      <nav className="sticky top-0 z-50 glass-effect border-b border-primary">
        <div className="responsive-container">
          <div className="flex items-center justify-between h-14 md:h-16">
            {/* Logo */}
            <div className="flex items-center space-x-2">
              <div className="w-6 h-6 md:w-8 md:h-8 bg-gradient-to-r from-[#00FFAE] to-[#00D4AA] rounded-lg flex items-center justify-center">
                <span className="text-black font-bold text-sm md:text-lg">S</span>
              </div>
              <span className="text-lg md:text-xl font-bold text-primary">Socrates</span>
            </div>

            {/* Main Tabs */}
            <div className="hidden md:flex items-center space-x-1">
              {mainTabs.map((tab) => (
                <button
                  key={tab.key}
                  onClick={() => setActiveTab(tab.key)}
                  className={`px-3 lg:px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 flex items-center space-x-1 lg:space-x-2 text-sm lg:text-base ${
                    activeTab === tab.key
                      ? 'bg-[#00FFAE] text-black'
                      : 'text-secondary hover:text-primary hover:bg-tertiary'
                  }`}
                >
                  <span className="text-sm lg:text-base">{tab.icon}</span>
                  <span className="hidden lg:inline">{tab.label}</span>
                  <span className="lg:hidden">{tab.label.slice(0, 2)}</span>
                </button>
              ))}
            </div>

            {/* Mobile Menu Button */}
            <div className="md:hidden flex items-center">
              <button className="p-2 text-primary hover:text-[#00FFAE] transition-colors">
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                </svg>
              </button>
            </div>

            {/* Right Side Controls */}
            <div className="flex items-center space-x-2 md:space-x-4">
              {/* Search Box */}
              <div className="relative hidden md:block">
                <input
                    type="text"
                    placeholder={t('search.placeholder')}
                    value={searchQuery}
                    onChange={(e) => setSearchQuery(e.target.value)}
                    className="w-48 lg:w-64 bg-tertiary border border-secondary rounded-lg px-3 py-2 text-sm text-primary placeholder-gray-400 focus:outline-none focus:border-[#00FFAE] transition-colors"
                  />
                  <svg className="absolute right-3 top-2.5 w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                  </svg>
              </div>

              {/* Balance Display */}
              <div className="hidden lg:flex items-center space-x-2 xl:space-x-4">
                <div className="bg-tertiary border border-secondary rounded-lg px-2 xl:px-4 py-2">
                  <div className="text-xs text-secondary">{t('balance.portfolio')}</div>
                  <div className="text-sm xl:text-base text-primary font-semibold">$3,247.89</div>
                </div>
                <div className="bg-tertiary border border-secondary rounded-lg px-2 xl:px-4 py-2">
                  <div className="text-xs text-secondary">{t('balance.cash')}</div>
                  <div className="text-sm xl:text-base text-primary font-semibold">$3,156.42</div>
                </div>
              </div>

              {/* Compact Balance for Medium Screens */}
              <div className="hidden md:flex lg:hidden items-center">
                <div className="bg-tertiary border border-secondary rounded-lg px-3 py-2">
                  <div className="text-xs text-secondary">ä½™é¢</div>
                  <div className="text-sm text-primary font-semibold">$3,156</div>
                </div>
              </div>

              {/* Language Toggle */}
              <Navbar />
            </div>
          </div>
        </div>
      </nav>

      {/* Main Content */}
      <main className="w-full px-4 sm:px-6 lg:px-8 py-8">
        {/* Mobile Tab Navigation */}
        <div className="flex flex-wrap gap-2 mb-8 md:hidden overflow-x-auto">
          {mainTabs.map((tab) => (
            <button
              key={tab.key}
              onClick={() => setActiveTab(tab.key)}
              className={`px-4 py-2 rounded-xl font-medium transition-all duration-200 hover:scale-105 flex items-center space-x-2 whitespace-nowrap ${
                activeTab === tab.key
                  ? 'bg-[#00FFAE] text-black'
                  : 'bg-tertiary text-secondary hover:bg-secondary'
              }`}
            >
              <span>{tab.icon}</span>
              <span>{tab.label}</span>
            </button>
          ))}
        </div>

        {/* Time Filter - Only show for Markets tab */}
        {activeTab === 'Markets' && (
          <div className="flex flex-wrap gap-2 mb-8">
            <span className="text-secondary text-sm font-medium px-3 py-2">{t('filter.hotSections')}:</span>
            {timeFilters.map((filter) => (
              <button
                key={filter.key}
                onClick={() => setSelectedTimeFilter(filter.key)}
                className={`px-4 py-2 rounded-xl font-medium transition-all duration-200 hover:scale-105 ${
                  selectedTimeFilter === filter.key
                    ? 'bg-[#00FFAE] text-black'
                    : 'bg-tertiary text-secondary hover:bg-secondary'
                }`}
              >
                {filter.label}
              </button>
            ))}
          </div>
        )}

        {/* Content based on active tab */}
        {activeTab === 'Markets' && (
          <div className="space-y-8">
            {/* Search and Filter Bar */}
            <div className="bg-tertiary rounded-2xl p-6 border border-secondary">
              <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                <div className="flex-1 max-w-md">
                  <div className="relative">
                    <input
                      type="text"
                      placeholder={t('search.placeholder')}
                      value={searchQuery}
                      onChange={(e) => setSearchQuery(e.target.value)}
                      className="w-full pl-10 pr-4 py-3 bg-primary border border-secondary rounded-xl text-primary placeholder-secondary focus:outline-none focus:border-[#00FFAE] transition-colors"
                    />
                    <svg className="absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                  </div>
                </div>
                
                <div className="flex items-center space-x-4">
                   <select 
                     value={selectedCategory}
                     onChange={(e) => setSelectedCategory(e.target.value)}
                     className="bg-primary border border-secondary rounded-xl px-4 py-3 text-primary focus:outline-none focus:border-[#00FFAE] transition-colors"
                   >
                     <option value="all">{t('category.all')}</option>
                     <option value="crypto">{t('category.crypto')}</option>
                     <option value="politics">{t('category.politics')}</option>
                     <option value="sports">{t('category.sports')}</option>
                     <option value="tech">{t('category.tech')}</option>
                     <option value="entertainment">{t('category.entertainment')}</option>
                   </select>
                   
                   <select 
                     value={sortBy}
                     onChange={(e) => setSortBy(e.target.value)}
                     className="bg-primary border border-secondary rounded-xl px-4 py-3 text-primary focus:outline-none focus:border-[#00FFAE] transition-colors"
                   >
                     <option value="newest">{t('sort.newest')}</option>
                     <option value="volume">{t('sort.volume')}</option>
                     <option value="ending">{t('sort.ending')}</option>
                     <option value="popular">{t('sort.popular')}</option>
                   </select>
                 </div>
              </div>
              

            </div>
            
            {/* ç»Ÿä¸€æ»šåŠ¨ä¸‰åˆ—å¸ƒå±€ */}
            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
              {/* æœ€æ–°åˆ›å»ºè¯é¢˜ */}
              <div className="space-y-4">
                <div className="flex items-center space-x-2 mb-4">
                  <div className="flex items-center space-x-2">
                    <span className="text-lg font-bold text-primary">{t('section.newCreated')}</span>
                    <div className="flex items-center space-x-1">
                      <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                      <span className="text-xs text-green-400">{t('section.updateEvery10s')}</span>
                    </div>
                  </div>
                  <span className="text-sm text-secondary bg-tertiary px-2 py-1 rounded">{newCreatedMarkets.length}</span>
                </div>
                <div className="space-y-4">
                  {isLoading ? (
                    Array.from({ length: 5 }).map((_, index) => (
                      <LoadingSkeleton key={index} />
                    ))
                  ) : (
                    newCreatedMarkets.map((market, index) => {
                      const isNewlyAdded = market.id.includes('_refresh')
                      return (
                        <div 
                          key={market.id} 
                          className={`hover:scale-105 transition-all duration-500 animate-fade-in ${
                            isNewlyAdded && index < 3 
                              ? 'ring-2 ring-green-500 shadow-lg shadow-green-500/20 animate-pulse' 
                              : ''
                          }`}
                          style={{ animationDelay: `${index * 50}ms` }}
                        >
                          <PredictionCard 
                            {...market} 
                            onCardClick={handleCardClick}
                          />
                        </div>
                      )
                    })
                  )}
                </div>
              </div>

              {/* å³å°†å‘å°„è¯é¢˜ */}
              <div className="space-y-4">
                <div className="flex items-center space-x-2 mb-4">
                  <div className="flex items-center space-x-2">
                    <span className="text-lg font-bold text-primary">{t('section.aboutToLaunch')}</span>
                    <div className="flex items-center space-x-1">
                      <div className="w-2 h-2 bg-orange-500 rounded-full animate-pulse"></div>
                      <span className="text-xs text-orange-400">{t('section.updateEvery15s')}</span>
                    </div>
                  </div>
                  <span className="text-sm text-secondary bg-tertiary px-2 py-1 rounded">{aboutToLaunchMarkets.length}</span>
                </div>
                <div className="space-y-4">
                  {isLoading ? (
                    Array.from({ length: 5 }).map((_, index) => (
                      <LoadingSkeleton key={index} />
                    ))
                  ) : (
                    aboutToLaunchMarkets.map((market, index) => {
                      const isNewlyAdded = market.id.includes('_refresh')
                      return (
                        <div 
                          key={market.id} 
                          className={`hover:scale-105 transition-all duration-500 animate-fade-in ${
                            isNewlyAdded && index < 3 
                              ? 'ring-2 ring-blue-500 shadow-lg shadow-blue-500/20 animate-pulse' 
                              : ''
                          }`}
                          style={{ animationDelay: `${index * 50}ms` }}
                        >
                          <PredictionCard 
                            {...market} 
                            onCardClick={handleCardClick}
                          />
                        </div>
                      )
                    })
                  )}
                </div>
              </div>

              {/* å·²ç»å‘å°„è¯é¢˜ */}
              <div className="space-y-4">
                <div className="flex items-center space-x-2 mb-4">
                  <div className="flex items-center space-x-2">
                    <span className="text-lg font-bold text-primary">{t('section.launched')}</span>
                    <div className="flex items-center space-x-1">
                      <div className="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                      <span className="text-xs text-blue-400">{t('section.keepOriginal')}</span>
                    </div>
                  </div>
                  <span className="text-sm text-secondary bg-tertiary px-2 py-1 rounded">{launchedMarkets.length}</span>
                </div>
                <div className="space-y-4">
                  {isLoading ? (
                    Array.from({ length: 5 }).map((_, index) => (
                      <LoadingSkeleton key={index} />
                    ))
                  ) : (
                    launchedMarkets.map((market, index) => (
                      <div 
                        key={market.id} 
                        className="hover:scale-105 transition-all duration-300 animate-fade-in" 
                        style={{ animationDelay: `${index * 100}ms` }}
                      >
                        <PredictionCard 
                          {...market} 
                          onCardClick={handleCardClick}
                        />
                      </div>
                    ))
                )}
              </div>
              </div>
            </div>
          </div>
            )}
          </div>
        )}

        {/* Following Tab - è·Ÿå•æ¿å— */}
        {activeTab === 'Following' && (
          <div className="space-y-6">
            {/* èªæ˜é’±åŒ…æ’è¡Œæ¦œ */}
            <div className="bg-tertiary rounded-2xl p-6 border border-secondary">
              <h2 className="text-xl font-bold text-primary mb-6">{t('following.smartWallets')}</h2>
              
              {/* è¡¨å¤´ */}
              <div className="grid grid-cols-12 gap-4 text-sm text-secondary font-medium mb-4 px-4">
                <div className="col-span-2">{t('following.wallet')}</div>
                <div className="col-span-1 text-center">{t('following.1dPnl')}</div>
                <div className="col-span-1 text-center">{t('following.7dPnl')}</div>
                <div className="col-span-1 text-center">{t('following.30dPnl')}</div>
                <div className="col-span-1 text-center">{t('following.7dWinRate')}</div>
                <div className="col-span-1 text-center">{t('following.7dTrades')}</div>
                <div className="col-span-1 text-center">{t('following.followers')}</div>
                <div className="col-span-2 text-center">{t('following.balance')}</div>
                <div className="col-span-2 text-center">{t('following.actions')}</div>
              </div>
              
              {/* é’±åŒ…åˆ—è¡¨ */}
              <div className="space-y-3">
                {smartWallets.map((wallet, index) => (
                  <div key={wallet.id} className="grid grid-cols-12 gap-4 items-center bg-secondary rounded-xl p-4 hover:bg-primary transition-colors">
                    {/* é’±åŒ…ä¿¡æ¯ */}
                    <div className="col-span-2 flex items-center space-x-3">
                      <div className="relative">
                        <div className="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-lg">
                          {wallet.avatar}
                        </div>
                        {wallet.status === 'online' && (
                          <div className="absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-secondary"></div>
                        )}
                      </div>
                      <div>
                        <div className="font-medium text-primary">{wallet.address}</div>
                        <div className="text-xs text-secondary">#{index + 1}</div>
                      </div>
                    </div>
                    
                    {/* 1Dç›ˆäº */}
                    <div className="col-span-1 text-center">
                      <span className={`font-medium ${
                        wallet.pnl1d.startsWith('+') ? 'text-green-500' : 'text-red-500'
                      }`}>
                        {wallet.pnl1d}
                      </span>
                    </div>
                    
                    {/* 7Dç›ˆäº */}
                    <div className="col-span-1 text-center">
                      <span className={`font-medium ${
                        wallet.pnl7d.startsWith('+') ? 'text-green-500' : 'text-red-500'
                      }`}>
                        {wallet.pnl7d}
                      </span>
                    </div>
                    
                    {/* 30Dç›ˆäº */}
                    <div className="col-span-1 text-center">
                      <span className={`font-medium ${
                        wallet.pnl30d.startsWith('+') ? 'text-green-500' : 'text-red-500'
                      }`}>
                        {wallet.pnl30d}
                      </span>
                    </div>
                    
                    {/* 7Dèƒœç‡ */}
                    <div className="col-span-1 text-center">
                      <span className="font-medium text-primary">{wallet.winRate7d}</span>
                    </div>
                    
                    {/* 7Däº¤æ˜“æ•° */}
                    <div className="col-span-1 text-center">
                      <span className="font-medium text-primary">{wallet.trades7d}</span>
                    </div>
                    
                    {/* è·Ÿå•äººæ•° */}
                    <div className="col-span-1 text-center">
                      <span className="font-medium text-primary">{wallet.followers}</span>
                    </div>
                    
                    {/* é’±åŒ…ä½™é¢ */}
                    <div className="col-span-2 text-center">
                      <span className="font-medium text-primary">{wallet.balance}</span>
                    </div>
                    
                    {/* æ“ä½œæŒ‰é’® */}
                    <div className="col-span-2 flex space-x-2 justify-center">
                      <button 
                        onClick={() => setSelectedWallet(wallet.id)}
                        className="bg-[#00FFAE] hover:bg-[#00D4AA] text-black px-4 py-2 rounded-lg font-medium transition-colors text-sm"
                      >
                        {t('following.follow')}
                      </button>
                      <button className="bg-tertiary hover:bg-secondary text-secondary hover:text-primary px-4 py-2 rounded-lg font-medium transition-colors text-sm">
                        {t('following.details')}
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            </div>
            
            {/* è·Ÿå•å†å² */}
            <div className="bg-tertiary rounded-2xl p-6 border border-secondary">
              <h3 className="text-lg font-bold text-primary mb-4">{t('following.myHistory')}</h3>
              <div className="text-center py-8 text-secondary">
                <div className="text-4xl mb-4">ğŸ“Š</div>
                <p>{t('following.noRecords')}</p>
                <p className="text-sm mt-2">{t('following.startCopyTrading')}</p>
              </div>
            </div>
          </div>
        )}

        {/* Live Tab Content - Pump.fun Style */}
        {activeTab === 'Live' && (
          <div className="space-y-6">
            {/* Live Stream Detail View */}
            {selectedLiveStream ? (
              <div className="space-y-6">
                {/* Back Button */}
                <button 
                  onClick={() => setSelectedLiveStream(null)}
                  className="flex items-center space-x-2 text-[#00FFAE] hover:text-[#00D4AA] transition-colors"
                >
                  <span>â†</span>
                  <span>è¿”å›ç›´æ’­åˆ—è¡¨</span>
                </button>

                {/* Live Stream Detail Layout */}
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  {/* Left - Live Stream */}
                  <div className="lg:col-span-2 space-y-4">
                    {/* Main Stream Video */}
                    <div className="bg-[#1A1A1A] rounded-xl overflow-hidden">
                      <div className="aspect-video bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-500 relative">
                        {/* Video Content Simulation */}
                        <div className="absolute inset-0 bg-black bg-opacity-30">
                          {/* K-line Chart Simulation */}
                          <div className="absolute top-6 left-6 right-6">
                            <div className="flex items-end space-x-1 h-20">
                              {Array.from({ length: 30 }).map((_, i) => (
                                <div 
                                  key={i} 
                                  className={`w-2 bg-gradient-to-t ${
                                    Math.random() > 0.5 ? 'from-green-400 to-green-600' : 'from-red-400 to-red-600'
                                  } opacity-80`}
                                  style={{ height: `${Math.random() * 80 + 20}%` }}
                                />
                              ))}
                            </div>
                          </div>
                          
                          {/* Live Indicator */}
                          <div className="absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold animate-pulse flex items-center space-x-1">
                            <span className="w-2 h-2 bg-white rounded-full animate-ping"></span>
                            <span>LIVE</span>
                          </div>
                          
                          {/* Viewer Count */}
                          <div className="absolute top-4 right-4 bg-black bg-opacity-60 text-white px-3 py-1 rounded-full text-sm flex items-center space-x-1">
                            <span>ğŸ‘</span>
                            <span>{selectedLiveStream.viewers.toLocaleString()}</span>
                          </div>
                          
                          {/* Real-time Data */}
                          <div className="absolute bottom-20 left-4 space-y-2">
                            <div className="bg-black bg-opacity-60 text-white px-3 py-1 rounded text-sm font-mono">
                              BTC: Â¥{(Math.random() * 10000 + 90000).toFixed(0)}
                            </div>
                            <div className="bg-black bg-opacity-60 text-white px-3 py-1 rounded text-sm font-mono">
                              ETH: Â¥{(Math.random() * 1000 + 3000).toFixed(0)}
                            </div>
                          </div>
                          
                          {/* Streamer Avatar */}
                          <div className="absolute bottom-4 left-4">
                            <div className="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-2xl border-3 border-white shadow-lg">
                              {selectedLiveStream.avatar}
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      {/* Stream Title */}
                      <div className="p-6">
                        <h2 className="text-2xl font-bold text-white mb-2">
                          {selectedLiveStream.title}
                        </h2>
                        <p className="text-gray-400 mb-4">
                          {selectedLiveStream.topic}
                        </p>
                        <div className="flex items-center space-x-6 text-sm">
                          <div className="flex items-center space-x-1 text-green-400">
                            <span className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                            <span>ç›´æ’­ä¸­</span>
                          </div>
                          <div className="text-gray-400">
                            {selectedLiveStream.viewers.toLocaleString()} è§‚çœ‹
                          </div>
                          <div className="text-gray-400">
                            å¼€æ’­æ—¶é—´: 2å°æ—¶å‰
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Live Interaction */}
                    <div className="bg-[#1A1A1A] rounded-xl p-6">
                      <h3 className="text-lg font-bold text-white mb-4 flex items-center">
                        <span className="text-[#00FFAE] mr-2">ğŸ’¬</span>
                        å®æ—¶äº’åŠ¨
                      </h3>
                      <div className="bg-[#0F0F0F] rounded-lg p-4 h-64 overflow-y-auto mb-4 space-y-3">
                        {[
                          { user: 'CryptoFan', msg: 'è¿™ä¸ªåˆ†æå¤ªä¸“ä¸šäº†ï¼', time: 'åˆšåˆš', avatar: 'ğŸ”¥' },
                          { user: 'Trader123', msg: 'BTCçœŸçš„ä¼šçªç ´å—ï¼Ÿ', time: '1åˆ†é’Ÿå‰', avatar: 'ğŸ’' },
                          { user: 'WhaleHunter', msg: 'è·Ÿç€å¤§å¸ˆå­¦ä¹ ', time: '2åˆ†é’Ÿå‰', avatar: 'ğŸ‹' },
                          { user: 'MoonBoy', msg: 'ğŸš€ğŸš€ğŸš€', time: '3åˆ†é’Ÿå‰', avatar: 'ğŸš€' },
                          { user: 'DiamondHands', msg: 'æŒæœ‰å°±æ˜¯èƒœåˆ©', time: '5åˆ†é’Ÿå‰', avatar: 'ğŸ’' },
                          { user: 'TechAnalyst', msg: 'æŠ€æœ¯æŒ‡æ ‡çœ‹æ¶¨', time: '6åˆ†é’Ÿå‰', avatar: 'ğŸ“Š' },
                          { user: 'NewsTrader', msg: 'å…³æ³¨æœ€æ–°æ¶ˆæ¯', time: '8åˆ†é’Ÿå‰', avatar: 'ğŸ“°' },
                          { user: 'SmartMoney', msg: 'èªæ˜é’±åœ¨è¿›åœº', time: '10åˆ†é’Ÿå‰', avatar: 'ğŸ§ ' }
                        ].map((chat, i) => (
                          <div key={i} className="flex items-start space-x-3">
                            <div className="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-sm">
                              {chat.avatar}
                            </div>
                            <div className="flex-1">
                              <div className="flex items-center space-x-2 mb-1">
                                <span className="text-[#00FFAE] font-medium text-sm">{chat.user}</span>
                                <span className="text-gray-500 text-xs">{chat.time}</span>
                              </div>
                              <p className="text-gray-300 text-sm">{chat.msg}</p>
                            </div>
                          </div>
                        ))}
                      </div>
                      <div className="flex space-x-2">
                        <input
                          type="text"
                          placeholder="è¾“å…¥æ¶ˆæ¯..."
                          className="flex-1 bg-[#0F0F0F] border border-gray-700 rounded px-3 py-2 text-white text-sm placeholder-gray-400 focus:outline-none focus:border-[#00FFAE]"
                        />
                        <button className="bg-[#00FFAE] hover:bg-[#00D4AA] text-black px-4 py-2 rounded font-medium transition-colors text-sm">
                          å‘é€
                        </button>
                      </div>
                    </div>
                  </div>

                  {/* Right - Trading & Comments */}
                  <div className="lg:col-span-1 space-y-4">
                    {/* Trading Section */}
                    <div className="bg-[#1A1A1A] rounded-xl p-4">
                      <h3 className="text-lg font-bold text-white mb-4 flex items-center">
                        <span className="text-[#00FFAE] mr-2">ğŸ’°</span>
                        äº¤æ˜“åŒºåŸŸ
                      </h3>
                      <div className="space-y-4">
                        {/* Market Info */}
                        <div className="bg-[#0F0F0F] rounded-lg p-3">
                          <div className="text-center mb-3">
                            <h4 className="text-white font-medium mb-1">BTCçªç ´10ä¸‡ç¾å…ƒï¼Ÿ</h4>
                            <p className="text-gray-400 text-xs">é¢„æµ‹æˆªæ­¢ï¼š2024å¹´12æœˆ31æ—¥</p>
                          </div>
                          <div className="grid grid-cols-2 gap-2">
                            <button className="bg-green-600 hover:bg-green-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors">
                              æ˜¯ 68%
                            </button>
                            <button className="bg-red-600 hover:bg-red-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors">
                              å¦ 32%
                            </button>
                          </div>
                        </div>

                        {/* Trading Form */}
                        <div className="bg-[#0F0F0F] rounded-lg p-3">
                          <div className="mb-3">
                            <label className="text-gray-400 text-xs mb-1 block">æŠ•æ³¨é‡‘é¢</label>
                            <input 
                              type="number" 
                              placeholder="0.00"
                              className="w-full bg-[#1A1A1A] border border-gray-700 rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-[#00FFAE]"
                            />
                          </div>
                          <button className="w-full bg-[#00FFAE] hover:bg-[#00D4AA] text-black font-medium py-2 rounded transition-colors text-sm">
                            ç¡®è®¤äº¤æ˜“
                          </button>
                        </div>

                        {/* Stats */}
                        <div className="bg-[#0F0F0F] rounded-lg p-3">
                          <h4 className="text-white font-medium mb-2 text-sm">äº¤æ˜“ç»Ÿè®¡</h4>
                          <div className="space-y-2 text-xs">
                            <div className="flex justify-between">
                              <span className="text-gray-400">æ€»äº¤æ˜“é‡</span>
                              <span className="text-white">$128.5K</span>
                            </div>
                            <div className="flex justify-between">
                              <span className="text-gray-400">å‚ä¸äººæ•°</span>
                              <span className="text-white">1,247</span>
                            </div>
                            <div className="flex justify-between">
                              <span className="text-gray-400">æµåŠ¨æ€§</span>
                              <span className="text-white">$45.2K</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Stream Stats */}
                    <div className="bg-[#1A1A1A] rounded-xl p-4">
                      <h3 className="text-lg font-bold text-white mb-4">ğŸ“Š ç›´æ’­æ•°æ®</h3>
                      <div className="space-y-3">
                        <div className="flex justify-between items-center">
                          <span className="text-gray-400 text-sm">å½“å‰è§‚çœ‹</span>
                          <span className="text-white font-medium">{selectedLiveStream.viewers.toLocaleString()}</span>
                        </div>
                        <div className="flex justify-between items-center">
                          <span className="text-gray-400 text-sm">å³°å€¼è§‚çœ‹</span>
                          <span className="text-white font-medium">{(selectedLiveStream.viewers * 1.5).toFixed(0)}</span>
                        </div>
                        <div className="flex justify-between items-center">
                          <span className="text-gray-400 text-sm">ç‚¹èµæ•°</span>
                          <span className="text-white font-medium">{(selectedLiveStream.viewers * 0.3).toFixed(0)}</span>
                        </div>
                        <div className="flex justify-between items-center">
                          <span className="text-gray-400 text-sm">åˆ†äº«æ¬¡æ•°</span>
                          <span className="text-white font-medium">{(selectedLiveStream.viewers * 0.1).toFixed(0)}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Comments Section */}
                <div className="bg-[#1A1A1A] rounded-xl p-6">
                  <h3 className="text-xl font-bold text-white mb-6 flex items-center">
                    <span className="text-[#00FFAE] mr-2">ğŸ’¬</span>
                    å…³äºè¿™ä¸ªè¯é¢˜çš„è¯„è®ºåŒº
                  </h3>
                  
                  {/* Comment Input */}
                  <div className="mb-6">
                    <div className="flex space-x-3">
                      <div className="w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-lg">
                        ğŸ‘¤
                      </div>
                      <div className="flex-1">
                        <textarea 
                          placeholder="åˆ†äº«ä½ å¯¹è¿™ä¸ªè¯é¢˜çš„çœ‹æ³•..."
                          className="w-full bg-[#0F0F0F] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm placeholder-gray-400 focus:outline-none focus:border-[#00FFAE] resize-none"
                          rows={3}
                        />
                        <div className="flex justify-between items-center mt-2">
                          <span className="text-gray-500 text-xs">æœ€å¤š500å­—</span>
                          <button className="bg-[#00FFAE] hover:bg-[#00D4AA] text-black px-4 py-1 rounded font-medium transition-colors text-sm">
                            å‘è¡¨è¯„è®º
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  {/* Comments List */}
                  <div className="space-y-4">
                    {[
                      {
                        id: 1,
                        user: 'CryptoExpert',
                        avatar: 'ğŸ”¥',
                        content: 'è¿™ä¸ªåˆ†æéå¸¸åˆ°ä½ï¼æŠ€æœ¯æŒ‡æ ‡ç¡®å®æ˜¾ç¤ºBTCæœ‰çªç ´çš„å¯èƒ½æ€§ï¼Œç‰¹åˆ«æ˜¯RSIå’ŒMACDçš„åŒé‡ä¿¡å·ç¡®è®¤ã€‚',
                        time: '5åˆ†é’Ÿå‰',
                        likes: 23,
                        replies: 3
                      },
                      {
                        id: 2,
                        user: 'MarketWatcher',
                        avatar: 'ğŸ“Š',
                        content: 'æˆ‘è§‰å¾—è¿˜éœ€è¦è§‚å¯Ÿä¸€ä¸‹å®è§‚ç»æµç¯å¢ƒï¼Œç¾è”å‚¨çš„æ”¿ç­–å¯¹åŠ å¯†è´§å¸å¸‚åœºå½±å“å¾ˆå¤§ã€‚',
                        time: '12åˆ†é’Ÿå‰',
                        likes: 15,
                        replies: 1
                      },
                      {
                        id: 3,
                        user: 'HODLer2024',
                        avatar: 'ğŸ’',
                        content: 'æ— è®ºå¦‚ä½•ï¼Œé•¿æœŸæŒæœ‰æ˜¯ç‹é“ï¼çŸ­æœŸæ³¢åŠ¨ä¸ç”¨å¤ªåœ¨æ„ã€‚',
                        time: '18åˆ†é’Ÿå‰',
                        likes: 31,
                        replies: 7
                      },
                      {
                        id: 4,
                        user: 'TechAnalyst',
                        avatar: 'ğŸ¯',
                        content: 'æ”¯æ’‘ä½å’Œé˜»åŠ›ä½çš„åˆ†æå¾ˆé‡è¦ï¼Œå»ºè®®å¤§å®¶å…³æ³¨å…³é”®ä»·ä½çš„çªç ´æƒ…å†µã€‚',
                        time: '25åˆ†é’Ÿå‰',
                        likes: 19,
                        replies: 2
                      }
                    ].map((comment) => (
                      <div key={comment.id} className="bg-[#0F0F0F] rounded-lg p-4">
                        <div className="flex items-start space-x-3">
                          <div className="w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-lg">
                            {comment.avatar}
                          </div>
                          <div className="flex-1">
                            <div className="flex items-center space-x-2 mb-2">
                              <span className="text-[#00FFAE] font-medium">{comment.user}</span>
                              <span className="text-gray-500 text-xs">{comment.time}</span>
                            </div>
                            <p className="text-gray-300 text-sm mb-3 leading-relaxed">{comment.content}</p>
                            <div className="flex items-center space-x-4 text-xs">
                              <button className="flex items-center space-x-1 text-gray-400 hover:text-[#00FFAE] transition-colors">
                                <span>ğŸ‘</span>
                                <span>{comment.likes}</span>
                              </button>
                              <button className="flex items-center space-x-1 text-gray-400 hover:text-[#00FFAE] transition-colors">
                                <span>ğŸ’¬</span>
                                <span>{comment.replies} å›å¤</span>
                              </button>
                              <button className="text-gray-400 hover:text-[#00FFAE] transition-colors">
                                åˆ†äº«
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>

                  {/* Load More Comments */}
                  <div className="text-center mt-6">
                    <button className="text-[#00FFAE] hover:text-[#00D4AA] transition-colors text-sm">
                      åŠ è½½æ›´å¤šè¯„è®º
                    </button>
                  </div>
                </div>
              </div>
            ) : (
            {/* Main Live Stream Layout */}
            <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
              {/* Left Sidebar - Live Streams List */}
              <div className="lg:col-span-1 space-y-4">
                <div className="bg-[#1A1A1A] rounded-xl p-4">
                  <h3 className="text-lg font-bold text-white mb-4 flex items-center">
                    <span className="w-3 h-3 bg-red-500 rounded-full animate-pulse mr-2"></span>
                    {t('live.liveNow')}
                  </h3>
                  <div className="space-y-3">
                     {liveStreams.map((stream) => (
                      <div key={stream.id} className="bg-[#0F0F0F] rounded-lg p-3 hover:bg-[#1F1F1F] transition-colors cursor-pointer" onClick={() => handleLiveStreamClick(stream)}>
                        <div className="flex items-center space-x-3">
                          <div className="w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-lg">
                            {stream.avatar}
                          </div>
                          <div className="flex-1 min-w-0">
                            <h4 className="text-white font-medium text-sm truncate">{stream.title}</h4>
                            <p className="text-gray-400 text-xs truncate">{stream.topic}</p>
                            <div className="flex items-center space-x-1 mt-1">
                              <span className="w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse"></span>
                              <span className="text-gray-500 text-xs">{stream.viewers.toLocaleString()}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Invite Section */}
                <div className="bg-gradient-to-br from-[#00FFAE]/10 to-[#00D4AA]/10 border border-[#00FFAE]/20 rounded-xl p-4">
                  <h3 className="text-lg font-bold text-white mb-4 flex items-center">
                    <span className="text-[#00FFAE] mr-2">ğŸ</span>
                    {t('live.inviteSection')}
                  </h3>
                  <div className="space-y-3">
                    <div className="text-center">
                      <div className="text-2xl font-bold text-[#00FFAE] mb-1">Â¥500</div>
                      <div className="text-sm text-gray-300">{t('live.inviteBonus')}</div>
                    </div>
                    <div className="grid grid-cols-2 gap-2 text-xs">
                      <div className="bg-[#0F0F0F] rounded-lg p-2 text-center">
                        <div className="text-white font-medium">12</div>
                        <div className="text-gray-400">{t('live.friendsInvited')}</div>
                      </div>
                      <div className="bg-[#0F0F0F] rounded-lg p-2 text-center">
                        <div className="text-[#00FFAE] font-medium">Â¥6,000</div>
                        <div className="text-gray-400">{t('live.totalEarned')}</div>
                      </div>
                    </div>
                    <button className="w-full bg-[#00FFAE] hover:bg-[#00D4AA] text-black font-medium py-2 rounded-lg transition-colors text-sm">
                      {t('live.inviteFriends')}
                    </button>
                    <div className="flex space-x-2">
                      <input 
                        type="text" 
                        value="PUMP2024" 
                        readOnly 
                        className="flex-1 bg-[#0F0F0F] border border-gray-700 rounded px-2 py-1 text-white text-xs"
                      />
                      <button className="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs transition-colors">
                        {t('live.copyCode')}
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              {/* Main Content - Featured Stream */}
              <div className="lg:col-span-2">
                <div className="bg-[#1A1A1A] rounded-xl overflow-hidden">
                  {/* Main Stream Video */}
                  <div className="aspect-video bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-500 relative">
                    {/* Video Content Simulation */}
                    <div className="absolute inset-0 bg-black bg-opacity-30">
                      {/* K-line Chart Simulation */}
                      <div className="absolute top-6 left-6 right-6">
                        <div className="flex items-end space-x-1 h-20">
                          {Array.from({ length: 30 }).map((_, i) => (
                            <div 
                              key={i} 
                              className={`w-2 bg-gradient-to-t ${
                                Math.random() > 0.5 ? 'from-green-400 to-green-600' : 'from-red-400 to-red-600'
                              } opacity-80`}
                              style={{ height: `${Math.random() * 80 + 20}%` }}
                            />
                          ))}
                        </div>
                      </div>
                      
                      {/* Live Indicator */}
                      <div className="absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold animate-pulse flex items-center space-x-1">
                        <span className="w-2 h-2 bg-white rounded-full animate-ping"></span>
                        <span>LIVE</span>
                      </div>
                      
                      {/* Viewer Count */}
                      <div className="absolute top-4 right-4 bg-black bg-opacity-60 text-white px-3 py-1 rounded-full text-sm flex items-center space-x-1">
                        <span>ğŸ‘</span>
                        <span>3,456</span>
                      </div>
                      
                      {/* Real-time Data */}
                      <div className="absolute bottom-20 left-4 space-y-2">
                        <div className="bg-black bg-opacity-60 text-white px-3 py-1 rounded text-sm font-mono">
                          BTC: Â¥{(Math.random() * 10000 + 90000).toFixed(0)}
                        </div>
                        <div className="bg-black bg-opacity-60 text-white px-3 py-1 rounded text-sm font-mono">
                          ETH: Â¥{(Math.random() * 1000 + 3000).toFixed(0)}
                        </div>
                      </div>
                      
                      {/* Streamer Avatar */}
                      <div className="absolute bottom-4 left-4">
                        <div className="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-2xl border-3 border-white shadow-lg">
                          ğŸ”®
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  {/* Stream Title - Centered */}
                  <div className="p-6 text-center">
                    <h2 className="text-2xl font-bold text-white mb-2">
                      PredictionMaster - ä»Šæ—¥çƒ­é—¨é¢„æµ‹å¸‚åœºæ·±åº¦åˆ†æ
                    </h2>
                    <p className="text-gray-400 mb-4">
                      å®æ—¶è§£æå¸‚åœºè¶‹åŠ¿ï¼Œåˆ†äº«ç‹¬å®¶äº¤æ˜“ç­–ç•¥ï¼Œå¸¦ä½ æŠ“ä½æ¯ä¸€ä¸ªæŠ•èµ„æœºä¼š
                    </p>
                    <div className="flex items-center justify-center space-x-6 text-sm">
                      <div className="flex items-center space-x-1 text-green-400">
                        <span className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                        <span>{t('live.liveNow')}</span>
                      </div>
                      <div className="text-gray-400">
                        3,456 {t('live.viewers')}
                      </div>
                      <div className="text-gray-400">
                        å¼€æ’­æ—¶é—´: 2å°æ—¶å‰
                      </div>
                    </div>
                    <div className="mt-4">
                      <button className="bg-[#00FFAE] hover:bg-[#00D4AA] text-black font-bold px-8 py-3 rounded-lg transition-colors">
                        {t('live.joinStream')}
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              {/* Right Sidebar - Chat & Info */}
              <div className="lg:col-span-1 space-y-4">
                {/* Live Chat */}
                <div className="bg-[#1A1A1A] rounded-xl p-4">
                  <h3 className="text-lg font-bold text-white mb-4 flex items-center">
                    <span className="text-[#00FFAE] mr-2">ğŸ’¬</span>
                    {t('live.realTimeChat')}
                  </h3>
                  <div className="bg-[#0F0F0F] rounded-lg p-3 h-64 overflow-y-auto mb-3 space-y-2">
                    {[
                      { user: 'CryptoFan', msg: 'è¿™ä¸ªåˆ†æå¤ªä¸“ä¸šäº†ï¼', time: 'åˆšåˆš' },
                      { user: 'Trader123', msg: 'BTCçœŸçš„ä¼šçªç ´å—ï¼Ÿ', time: '1åˆ†é’Ÿå‰' },
                      { user: 'WhaleHunter', msg: 'è·Ÿç€å¤§å¸ˆå­¦ä¹ ', time: '2åˆ†é’Ÿå‰' },
                      { user: 'MoonBoy', msg: 'ğŸš€ğŸš€ğŸš€', time: '3åˆ†é’Ÿå‰' },
                      { user: 'DiamondHands', msg: 'æŒæœ‰å°±æ˜¯èƒœåˆ©', time: '5åˆ†é’Ÿå‰' }
                    ].map((chat, i) => (
                      <div key={i} className="text-sm">
                        <div className="flex items-start space-x-2">
                          <span className="text-[#00FFAE] font-medium text-xs">{chat.user}:</span>
                          <span className="text-gray-300 text-xs flex-1">{chat.msg}</span>
                        </div>
                        <div className="text-gray-500 text-xs ml-2">{chat.time}</div>
                      </div>
                    ))}
                  </div>
                  <div className="flex space-x-2">
                    <input
                      type="text"
                      placeholder={t('live.chatPlaceholder')}
                      className="flex-1 bg-[#0F0F0F] border border-gray-700 rounded px-3 py-2 text-white text-sm placeholder-gray-400 focus:outline-none focus:border-[#00FFAE]"
                    />
                    <button className="bg-[#00FFAE] hover:bg-[#00D4AA] text-black px-4 py-2 rounded font-medium transition-colors text-sm">
                      {t('live.send')}
                    </button>
                  </div>
                </div>

                {/* Stream Stats */}
                <div className="bg-[#1A1A1A] rounded-xl p-4">
                  <h3 className="text-lg font-bold text-white mb-4">ğŸ“Š ç›´æ’­æ•°æ®</h3>
                  <div className="space-y-3">
                    <div className="flex justify-between items-center">
                      <span className="text-gray-400 text-sm">å½“å‰è§‚çœ‹</span>
                      <span className="text-white font-medium">3,456</span>
                    </div>
                    <div className="flex justify-between items-center">
                      <span className="text-gray-400 text-sm">å³°å€¼è§‚çœ‹</span>
                      <span className="text-white font-medium">5,234</span>
                    </div>
                    <div className="flex justify-between items-center">
                      <span className="text-gray-400 text-sm">ç‚¹èµæ•°</span>
                      <span className="text-white font-medium">12.3K</span>
                    </div>
                    <div className="flex justify-between items-center">
                      <span className="text-gray-400 text-sm">åˆ†äº«æ¬¡æ•°</span>
                      <span className="text-white font-medium">456</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            {/* Bottom Section - More Streams */}
            <div className="bg-[#1A1A1A] rounded-xl p-6">
              <h2 className="text-xl font-bold text-white mb-6">{t('live.featuredStreams')}</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                 {featuredStreams.map((stream) => (
                  <div key={stream.id} className="bg-[#0F0F0F] rounded-lg overflow-hidden hover:bg-[#1F1F1F] transition-colors cursor-pointer group" onClick={() => handleLiveStreamClick(stream)}>
                    <div className="aspect-video bg-gradient-to-br from-blue-600 to-purple-600 relative">
                      <div className="absolute inset-0 bg-black bg-opacity-20">
                        <div className="absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded text-xs font-bold animate-pulse">
                          ğŸ”´ LIVE
                        </div>
                        <div className="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-xs">
                          {stream.viewers}
                        </div>
                        <div className="absolute bottom-2 left-2">
                          <div className="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-sm">
                            {stream.avatar}
                          </div>
                        </div>
                      </div>
                    </div>
                    <div className="p-3">
                      <h3 className="text-white font-medium text-sm mb-1 text-center">{stream.title}</h3>
                      <p className="text-gray-400 text-xs text-center line-clamp-2">{stream.topic}</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* Video Tab Content */}
        {activeTab === 'Video' && (
          <div className="space-y-6">
            <div className="bg-[#1A1A1A] rounded-xl p-6">
              <h2 className="text-xl font-bold text-white mb-4">ğŸ¥ çƒ­é—¨è§†é¢‘</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {[1, 2, 3, 4, 5, 6, 7, 8, 9].map((i) => (
                  <div key={i} className="bg-[#0F0F0F] rounded-lg overflow-hidden hover:bg-[#1F1F1F] transition-colors cursor-pointer">
                    <div className="aspect-video bg-gradient-to-br from-green-600 to-teal-600 relative">
                      <div className="absolute bottom-2 right-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs">
                        {Math.floor(Math.random() * 60) + 1}:{String(Math.floor(Math.random() * 60)).padStart(2, '0')}
                      </div>
                      <div className="absolute inset-0 flex items-center justify-center">
                        <div className="w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                          <div className="w-0 h-0 border-l-4 border-r-0 border-t-2 border-b-2 border-l-white border-t-transparent border-b-transparent ml-1"></div>
                        </div>
                      </div>
                    </div>
                    <div className="p-4">
                      <h3 className="text-white font-medium mb-2">å¸‚åœºåˆ†æç¬¬{i}æœŸ</h3>
                      <p className="text-gray-400 text-sm mb-2">æ·±åº¦è§£æå½“å‰å¸‚åœºè¶‹åŠ¿å’ŒæŠ•èµ„æœºä¼š</p>
                      <div className="flex items-center justify-between text-xs text-gray-500">
                        <span>{Math.floor(Math.random() * 10000) + 1000} è§‚çœ‹</span>
                        <span>{Math.floor(Math.random() * 7) + 1}å¤©å‰</span>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* Audio Tab Content */}
        {activeTab === 'Audio' && (
          <div className="space-y-6">
            <div className="bg-[#1A1A1A] rounded-xl p-6">
              <h2 className="text-xl font-bold text-white mb-4">ğŸ™ï¸ è¯­éŸ³ç›´æ’­</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {[1, 2, 3, 4, 5, 6].map((i) => (
                  <div key={i} className="bg-[#0F0F0F] rounded-lg p-6 hover:bg-[#1F1F1F] transition-colors cursor-pointer">
                    <div className="flex items-center space-x-4 mb-4">
                      <div className="w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-full flex items-center justify-center">
                        <span className="text-white font-bold text-lg">ä¸»{i}</span>
                      </div>
                      <div className="flex-1">
                        <h3 className="text-white font-medium mb-1">è¯­éŸ³æˆ¿é—´ {i}</h3>
                        <p className="text-gray-400 text-sm">æ­£åœ¨è®¨è®º: DeFiåè®®åˆ†æ</p>
                        <div className="flex items-center space-x-2 mt-2">
                          <div className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                          <span className="text-red-400 text-xs">ç›´æ’­ä¸­</span>
                          <span className="text-gray-500 text-xs">â€¢ {Math.floor(Math.random() * 500) + 50} å¬ä¼—</span>
                        </div>
                      </div>
                    </div>
                    <div className="flex items-center justify-between">
                      <div className="flex space-x-2">
                        {[1, 2, 3, 4].map((j) => (
                          <div key={j} className="w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center">
                            <span className="text-white text-xs">U{j}</span>
                          </div>
                        ))}
                        <div className="w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center">
                          <span className="text-gray-400 text-xs">+{Math.floor(Math.random() * 20) + 5}</span>
                        </div>
                      </div>
                      <button className="bg-[#00FFAE] hover:bg-[#00D4AA] text-black px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        åŠ å…¥
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Audio Podcasts */}
            <div className="bg-[#1A1A1A] rounded-xl p-6">
              <h2 className="text-xl font-bold text-white mb-4">ğŸ§ çƒ­é—¨æ’­å®¢</h2>
              <div className="space-y-4">
                {[1, 2, 3, 4, 5].map((i) => (
                  <div key={i} className="bg-[#0F0F0F] rounded-lg p-4 hover:bg-[#1F1F1F] transition-colors cursor-pointer">
                    <div className="flex items-center space-x-4">
                      <div className="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center">
                        <span className="text-white font-bold">P{i}</span>
                      </div>
                      <div className="flex-1">
                        <h3 className="text-white font-medium mb-1">åŠ å¯†è´§å¸æ·±åº¦è®¿è°ˆ ç¬¬{i}æœŸ</h3>
                        <p className="text-gray-400 text-sm">ä¸è¡Œä¸šä¸“å®¶æ¢è®¨æœ€æ–°è¶‹åŠ¿</p>
                      </div>
                      <div className="text-right">
                        <div className="text-gray-500 text-xs">{Math.floor(Math.random() * 60) + 10}åˆ†é’Ÿ</div>
                        <div className="text-gray-500 text-xs">{Math.floor(Math.random() * 5000) + 1000} æ’­æ”¾</div>
                      </div>
                      <button className="w-10 h-10 bg-[#00FFAE] hover:bg-[#00D4AA] rounded-full flex items-center justify-center transition-colors">
                        <div className="w-0 h-0 border-l-3 border-r-0 border-t-2 border-b-2 border-l-black border-t-transparent border-b-transparent ml-1"></div>
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* Load More Button - Only for Markets */}
        {activeTab === 'Markets' && !isLoading && (marketGroups.new.length > 0 || marketGroups.launching.length > 0 || marketGroups.launched.length > 0) && (
          <div className="text-center mt-12">
            <button className="bg-[#00FFAE] hover:bg-[#00D4AA] text-black font-bold py-3 px-8 rounded-lg transition-all duration-200 hover:scale-105 animate-bounce-in">
              åŠ è½½æ›´å¤š
            </button>
          </div>
        )}

        {/* No Results - Only for Markets */}
        {activeTab === 'Markets' && !isLoading && marketGroups.new.length === 0 && marketGroups.launching.length === 0 && marketGroups.launched.length === 0 && (
          <div className="text-center py-12 animate-fade-in">
            <div className="text-gray-400 text-lg mb-4">æš‚æ— æœç´¢ç»“æœ</div>
            <button 
              onClick={() => {
                setSearchQuery('')
              }}
              className="text-[#00FFAE] hover:text-[#00D4AA] transition-colors hover:scale-105"
            >
              æ¸…é™¤æœç´¢æ¡ä»¶
            </button>
          </div>
        )}
      </main>

      {/* Footer */}
      <footer className="border-t border-dark-700 mt-20">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
              <div className="flex items-center space-x-2 mb-4">
                <div className="w-8 h-8 bg-gradient-to-r from-accent-green to-primary-400 rounded-lg flex items-center justify-center">
                  <span className="text-white font-bold text-lg">P</span>
                </div>
                <span className="text-xl font-bold text-gradient">PredictMarket</span>
              </div>
              <p className="text-gray-400">
                {t('footer.description')}
              </p>
            </div>
            
            <div>
              <h3 className="font-semibold mb-4">{t('footer.markets')}</h3>
              <ul className="space-y-2 text-gray-400">
                <li><a href="#" className="hover:text-white transition-colors">{t('category.crypto')}</a></li>
                <li><a href="#" className="hover:text-white transition-colors">{t('category.politics')}</a></li>
                <li><a href="#" className="hover:text-white transition-colors">{t('category.sports')}</a></li>
                <li><a href="#" className="hover:text-white transition-colors">{t('category.tech')}</a></li>
              </ul>
            </div>
            
            <div>
              <h3 className="font-semibold mb-4">{t('footer.support')}</h3>
              <ul className="space-y-2 text-gray-400">
                <li><a href="#" className="hover:text-white transition-colors">{t('footer.helpCenter')}</a></li>
                <li><a href="#" className="hover:text-white transition-colors">{t('footer.documentation')}</a></li>
                <li><a href="#" className="hover:text-white transition-colors">{t('footer.api')}</a></li>
                <li><a href="#" className="hover:text-white transition-colors">{t('footer.contact')}</a></li>
              </ul>
            </div>
            
            <div>
              <h3 className="font-semibold mb-4">{t('footer.community')}</h3>
              <ul className="space-y-2 text-gray-400">
                <li><a href="#" className="hover:text-white transition-colors">Discord</a></li>
                <li><a href="#" className="hover:text-white transition-colors">Twitter</a></li>
                <li><a href="#" className="hover:text-white transition-colors">Telegram</a></li>
                <li><a href="#" className="hover:text-white transition-colors">GitHub</a></li>
              </ul>
            </div>
          </div>
          
          <div className="border-t border-dark-700 mt-8 pt-8 text-center text-gray-400">
            <p>{t('footer.copyright')}</p>
          </div>
        </div>
      </footer>

      {/* Market Detail Modal */}
      {selectedMarketId && (
        <MarketDetail
          marketId={selectedMarketId}
          onClose={() => setSelectedMarketId(null)}
        />
      )}
    </div>
  )
}